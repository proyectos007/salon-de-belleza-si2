import{_ as C}from"./AppLayout-BZxvAeOc.js";import{s as x}from"./index-D0b6ATor.js";import{d as i,i as O,x as R,c as w,o as U,w as _,a,b as t,u as m,W as k}from"./app-13YhllzU.js";import E from"./RoleTable-BPttiEka.js";import j from"./RoleCreateModal-CCidOPsF.js";import B from"./RoleEditModal-CjrRPmc6.js";import F from"./RolePermissionsModal-DBHgrHVO.js";import G from"./PermissionsManagementModal-C04LWp0i.js";import"./index-DtiDn9lJ.js";import"./index-DzqK50WV.js";import"./index-LCkz8Cdp.js";import"./index-DRxSqBOV.js";import"./index-Bd2e2ua-.js";import"./index-C_4vxBeT.js";import"./index-DHd4Qs9j.js";import"./index-CeOIhm3G.js";import"./index-DGq_AH1Y.js";const N={class:"mt-4 bg-white shadow-md p-4 rounded-lg"},V={class:"flex justify-between my-5"},W={class:"flex gap-2"},oe={__name:"Index",props:{roles:Object,permissions:Object},setup(u){const r=i(!1),n=i(!1),d=i(!1),p=i(!1),b=i(null),y=i(null),v=i([]),f=O(),c=R({name:""}),l=R({id:null,name:""}),S=o=>{b.value=o,l.id=o.id,l.name=o.name,n.value=!0},P=o=>{y.value=o,v.value=o.permissions.map(e=>e.id),d.value=!0},$=()=>{c.post(route("admin.roles.store"),{onSuccess:()=>{f.add({severity:"success",summary:"Rol creado",life:4e3}),c.reset(),r.value=!1}})},g=()=>{l.put(route("admin.roles.update",l.id),{onSuccess:()=>{f.add({severity:"success",summary:"Rol actualizado",life:4e3}),n.value=!1}})},M=o=>{confirm("Â¿Seguro que deseas eliminar este rol?")&&k.delete(route("admin.roles.destroy",o.id),{preserveScroll:!0,onSuccess:()=>f.add({severity:"success",summary:"Rol eliminado",life:4e3})})};return(o,e)=>(U(),w(C,{title:"Roles y Permisos"},{default:_(()=>[a("div",N,[a("div",V,[e[7]||(e[7]=a("h2",{class:"font-semibold text-xl text-gray-800"}," Gestionar Roles ",-1)),a("div",W,[t(m(x),{label:"Gestionar permisos",onClick:e[0]||(e[0]=s=>p.value=!0)}),t(m(x),{label:"Crear Rol",onClick:e[1]||(e[1]=s=>r.value=!0)})])]),t(E,{roles:u.roles,onEdit:S,onDelete:M,onAssignPermissions:P},null,8,["roles"]),t(j,{visible:r.value,"onUpdate:visible":e[2]||(e[2]=s=>r.value=s),form:m(c),onSubmit:$},null,8,["visible","form"]),t(B,{visible:n.value,"onUpdate:visible":e[3]||(e[3]=s=>n.value=s),form:m(l),role:b.value,onSubmit:g},null,8,["visible","form","role"]),t(F,{visible:d.value,"onUpdate:visible":e[4]||(e[4]=s=>d.value=s),permissions:u.permissions,role:y.value,selected:v.value,"onUpdate:selected":e[5]||(e[5]=s=>v.value=s),onSubmit:o.submitPermissions},null,8,["visible","permissions","role","selected","onSubmit"]),t(G,{visible:p.value,"onUpdate:visible":e[6]||(e[6]=s=>p.value=s),permissions:u.permissions},null,8,["visible","permissions"])])]),_:1}))}};export{oe as default};
