import{i as A,d as g,G as B,c as T,o as S,w as u,a as i,j as D,b as t,e as F,f as G,u as o,g as L}from"./app-13YhllzU.js";import{_ as M}from"./AppLayout-BZxvAeOc.js";import{s as p}from"./index-DytqG5Xx.js";import{s as V}from"./index-DHd4Qs9j.js";import{s as O}from"./index-Bd2e2ua-.js";import{e as I}from"./index-C_4vxBeT.js";import{s as P}from"./index-D0b6ATor.js";import"./index-DtiDn9lJ.js";import"./index-DzqK50WV.js";import"./index-DRxSqBOV.js";const c=(f,r,d)=>{d!=null&&f.append(r,d)},R={class:"mt-4 bg-white shadow-md p-4 rounded-lg"},H={class:"grid grid-cols-2 gap-4"},q={class:"flex items-center gap-2"},z=["src"],J={class:"flex justify-end"},te={__name:"create",props:{service:{type:Object,default:()=>({})},employees:{type:Array}},setup(f){var x,h;const r=f,d=A(),a=g({...r==null?void 0:r.service,has_discount:((x=r.service)==null?void 0:x.has_discount)===1,has_available:((h=r.service)==null?void 0:h.has_available)===1,price:r.service.price??0,discount_price:r.service.discount_price??0}),v=g(!1),_=g(null),N=s=>{const e=s.target.files[0];if(e){const l=new FileReader;_.value=e,l.onload=m=>{a.value.image_path=m.target.result},l.readAsDataURL(e)}},$=()=>{var e,l,m,w,E,U;const s=new FormData;c(s,"name",(e=a.value)==null?void 0:e.name),c(s,"price",(l=a.value)==null?void 0:l.price),c(s,"discount_price",(m=a.value)==null?void 0:m.discount_price),c(s,"specialist_id",(w=a.value)==null?void 0:w.specialist_id),s.append("has_discount",(E=a.value)!=null&&E.has_discount?1:0),s.append("has_available",(U=a.value)!=null&&U.has_available?1:0),a.value.id&&s.append("id",a.value.id),_.value&&s.append("image",_.value),v.value=!0,axios.post(route("services.store"),s,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{n.status==200?(d.add({severity:"success",summary:"Ã‰xito",detail:"Servicio guardado correctamente",life:3e3}),a.value.id=n.data.id):d.add({severity:"error",summary:"Error",detail:"Error al guardar el servicio",life:3e3})}).catch(n=>{var k,C;const b=(C=(k=n.response)==null?void 0:k.data)==null?void 0:C.errors;console.log(n),console.log(b),b?Object.entries(b).forEach(([K,y])=>{Array.isArray(y)?y.forEach(j=>{d.add({severity:"error",summary:"Error",life:5e3,detail:j})}):d.add({severity:"error",summary:"Error",life:5e3,detail:y})}):d.add({severity:"error",summary:"Error",life:5e3,detail:"Ha ocurrido un error desconocido."})}).finally(()=>{v.value=!1})};return B(()=>{}),(s,e)=>(S(),T(M,{title:"Crear Servicio",icon:"fa-solid fa-plus"},{default:u(()=>[i("div",R,[i("form",{onSubmit:D($,["prevent"]),class:"flex flex-col gap-4"},[t(o(p),{variant:"on"},{default:u(()=>[t(o(V),{id:"name",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.name=l),autocomplete:"off"},null,8,["modelValue"]),e[6]||(e[6]=i("label",{for:"name"},"Nombre de servicio",-1))]),_:1}),i("div",H,[t(o(p),{variant:"on"},{default:u(()=>[t(o(V),{id:"price",modelValue:a.value.price,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.price=l),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e[7]||(e[7]=i("label",{for:"price"},"Precio",-1))]),_:1}),t(o(p),{variant:"on"},{default:u(()=>[t(o(V),{id:"discount_price",modelValue:a.value.discount_price,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.discount_price=l),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e[8]||(e[8]=i("label",{for:"discount_price"},"Precio de descuento",-1))]),_:1}),t(o(p),{variant:"on"},{default:u(()=>[t(o(O),{id:"specialist_id",name:"specialist_id",modelValue:a.value.specialist_id,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.specialist_id=l),options:r.employees,optionValue:"id",optionLabel:"name",autocomplete:"off",class:"w-full"},null,8,["modelValue","options"]),e[9]||(e[9]=i("label",{for:"specialist"},"Especialista",-1))]),_:1})]),i("div",q,[t(o(I),{modelValue:a.value.has_discount,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.has_discount=l),inputId:"has_discount",name:"has_discount",binary:"true"},null,8,["modelValue"]),e[10]||(e[10]=i("label",{for:"has_discount",class:"font-semibold text-sm opacity-65 text-slate-600"}," Servicio en descuento ",-1)),t(o(I),{modelValue:a.value.has_available,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.has_available=l),inputId:"has_available",name:"has_available",binary:"true"},null,8,["modelValue"]),e[11]||(e[11]=i("label",{for:"has_available",class:"font-semibold text-sm opacity-65 text-slate-600"},"Servicio disponible ",-1))]),i("input",{type:"file",name:"image",id:"image",accept:"image/*",class:"w-full",onChange:N},null,32),a.value.image_path?(S(),F("img",{key:0,src:a.value.image_path,class:"mx-auto w-800 h-80",alt:""},null,8,z)):G("",!0),i("div",J,[t(o(P),{type:"submit",loading:v.value},{default:u(()=>e[12]||(e[12]=[i("i",{class:"fa-solid fa-floppy-disk"},null,-1),L(" Guardar ")])),_:1},8,["loading"])])],32)])]),_:1}))}};export{te as default};
