import{i as k,x,k as y,c as w,o as d,w as B,a as o,j as C,e as m,F as _,h as S,u as a,t as j,b as u}from"./app-iFrUQ6Gu.js";import{s as A}from"./index-CG3TGDyQ.js";import{s as p}from"./index-DZIu5ukr.js";const P={class:"p-4 max-h-[60vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2"},$=["value","checked","onChange"],F={class:"text-sm"},M={class:"flex justify-end mt-4 gap-2"},E={__name:"RolePermissionsModal",props:{visible:Boolean,role:Object,permissions:Array,selected:Array},emits:["update:visible"],setup(r,{emit:b}){const n=r,c=b,f=k(),i=x({permissions:[]});y(()=>n.selected,t=>{i.permissions=[...t]},{immediate:!0});const v=(t,e)=>{i.permissions=t?[...i.permissions,e]:i.permissions.filter(l=>l!==e)},g=()=>{var t,e;(t=n.role)!=null&&t.id&&i.post(route("admin.roles.permissions",{role:(e=n.role)==null?void 0:e.id}),{preserveScroll:!0,onSuccess:()=>{f.add({severity:"success",summary:"Permisos asignado al rol exitosamente",life:4e3}),c("update:visible",!1)}})};return(t,e)=>{var l;return d(),w(a(A),{visible:r.visible,"onUpdate:visible":e[1]||(e[1]=s=>c("update:visible",s)),header:`Asignar permisos a ${(l=r.role)==null?void 0:l.name}`,style:{width:"40rem"}},{default:B(()=>[o("form",{onSubmit:C(g,["prevent"])},[o("div",P,[(d(!0),m(_,null,S(r.permissions,s=>(d(),m("div",{key:s.id,class:"flex items-center gap-2 mb-1"},[o("input",{type:"checkbox",value:s.id,checked:a(i).permissions.includes(s.id),onChange:h=>v(h.target.checked,s.id),class:"form-checkbox"},null,40,$),o("label",F,j(s.name),1)]))),128))]),o("div",M,[u(a(p),{label:"Cerrar",onClick:e[0]||(e[0]=s=>c("update:visible",!1))}),u(a(p),{label:"Guardar cambios",type:"submit",loading:a(i).processing},null,8,["loading"])])],32)]),_:1},8,["visible","header"])}}};export{E as default};
