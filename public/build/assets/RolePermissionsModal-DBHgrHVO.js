import{i as k,x,k as y,c as w,o as m,w as B,a as o,j as C,e as d,F as _,h as S,u as r,t as j,b as u}from"./app-13YhllzU.js";import{s as A}from"./index-DGq_AH1Y.js";import{s as p}from"./index-D0b6ATor.js";import"./index-DtiDn9lJ.js";import"./index-DRxSqBOV.js";import"./index-CeOIhm3G.js";const P={class:"p-4 max-h-[60vh] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2"},$=["value","checked","onChange"],F={class:"text-sm"},M={class:"flex justify-end mt-4 gap-2"},O={__name:"RolePermissionsModal",props:{visible:Boolean,role:Object,permissions:Array,selected:Array},emits:["update:visible"],setup(a,{emit:b}){const n=a,c=b,f=k(),i=x({permissions:[]});y(()=>n.selected,t=>{i.permissions=[...t]},{immediate:!0});const v=(t,e)=>{i.permissions=t?[...i.permissions,e]:i.permissions.filter(l=>l!==e)},g=()=>{var t,e;(t=n.role)!=null&&t.id&&i.post(route("admin.roles.permissions",{role:(e=n.role)==null?void 0:e.id}),{preserveScroll:!0,onSuccess:()=>{f.add({severity:"success",summary:"Permisos asignado al rol exitosamente",life:4e3}),c("update:visible",!1)}})};return(t,e)=>{var l;return m(),w(r(A),{visible:a.visible,"onUpdate:visible":e[1]||(e[1]=s=>c("update:visible",s)),header:`Asignar permisos a ${(l=a.role)==null?void 0:l.name}`,style:{width:"40rem"}},{default:B(()=>[o("form",{onSubmit:C(g,["prevent"])},[o("div",P,[(m(!0),d(_,null,S(a.permissions,s=>(m(),d("div",{key:s.id,class:"flex items-center gap-2 mb-1"},[o("input",{type:"checkbox",value:s.id,checked:r(i).permissions.includes(s.id),onChange:h=>v(h.target.checked,s.id),class:"form-checkbox"},null,40,$),o("label",F,j(s.name),1)]))),128))]),o("div",M,[u(r(p),{label:"Cerrar",onClick:e[0]||(e[0]=s=>c("update:visible",!1))}),u(r(p),{label:"Guardar cambios",type:"submit",loading:r(i).processing},null,8,["loading"])])],32)]),_:1},8,["visible","header"])}}};export{O as default};
