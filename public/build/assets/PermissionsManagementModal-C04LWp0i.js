import{i as w,x as C,d as f,c as S,o as d,w as h,a as l,j as B,b as r,u as s,e as v,F as P,h as V,t as $,W as j}from"./app-13YhllzU.js";import{s as z}from"./index-DGq_AH1Y.js";import{s as n}from"./index-D0b6ATor.js";import{s as E}from"./index-DHd4Qs9j.js";import"./index-DtiDn9lJ.js";import"./index-DRxSqBOV.js";import"./index-CeOIhm3G.js";const M={class:"grid grid-cols-2 gap-4 max-h-[300px] overflow-y-auto text-sm"},N={class:"flex justify-end mt-4"},G={__name:"PermissionsManagementModal",props:{visible:Boolean,permissions:Array},emits:["update:visible"],setup(u,{emit:b}){const c=b,m=w(),i=C({name:""}),o=f(!1),p=f(null),y=a=>{o.value=!0,p.value=a.id,i.name=a.name},g=()=>{o.value?i.put(route("admin.permissions.update",p.value),{onSuccess:()=>{m.add({severity:"success",summary:"Permiso actualizado",life:3e3}),i.reset(),o.value=!1}}):i.post(route("admin.permissions.store"),{onSuccess:()=>{m.add({severity:"success",summary:"Permiso creado",life:3e3}),i.reset()}})},x=a=>{confirm("¿Seguro que deseas eliminar este permiso?")&&j.delete(route("admin.permissions.destroy",a.id),{preserveScroll:!0,onSuccess:()=>m.add({severity:"success",summary:"Permiso eliminado",life:4e3})})};return(a,t)=>(d(),S(s(z),{visible:u.visible,"onUpdate:visible":t[2]||(t[2]=e=>c("update:visible",e)),header:"Gestión de permisos",style:{width:"30rem"}},{default:h(()=>[l("form",{onSubmit:B(g,["prevent"]),class:"flex gap-2 mb-4"},[r(s(E),{modelValue:s(i).name,"onUpdate:modelValue":t[0]||(t[0]=e=>s(i).name=e),placeholder:"Nombre del permiso",class:"w-full"},null,8,["modelValue"]),r(s(n),{label:o.value?"Actualizar":"Crear",loading:s(i).processing,type:"submit"},null,8,["label","loading"])],32),l("div",M,[(d(!0),v(P,null,V(u.permissions,e=>(d(),v("div",{key:e.id,class:"flex items-center justify-between rounded px-3 py-2 shadow-sm bg-slate-100"},[l("span",null,$(e.name),1),l("div",null,[r(s(n),{icon:"pi pi-pencil",size:"small",text:"",onClick:k=>y(e)},null,8,["onClick"]),r(s(n),{icon:"pi pi-trash",severity:"danger",onClick:k=>x(e)},null,8,["onClick"])])]))),128))]),l("div",N,[r(s(n),{label:"Cerrar",onClick:t[1]||(t[1]=e=>c("update:visible",!1))})])]),_:1},8,["visible"]))}};export{G as default};
